<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - Knowledge Platform</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: linear-gradient(135deg, #f2f1ed 0%, #dad8d3 100%);
        min-height: 100vh;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .registration-container {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin: 50px auto;
        max-width: 900px;
      }

      .header-section {
        background: linear-gradient(135deg, #dedb15 0%, #d8ca25 100%);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header-section h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 10px;
      }

      .header-section p {
        opacity: 0.9;
        font-size: 1.1rem;
      }

      .nav-pills .nav-link {
        border-radius: 25px;
        padding: 12px 25px;
        margin: 0 5px;
        border: 2px solid transparent;
        transition: all 0.3s ease;
        font-weight: 600;
      }

      .nav-pills .nav-link:not(.active) {
        background: #f8f9fa;
        color: #6c757d;
      }

      .nav-pills .nav-link.active {
        background: linear-gradient(135deg, #d77a7f 0%, #c87475 100%);
        border-color: #667eea;
        color: white;
      }

      .nav-pills .nav-link:hover:not(.active) {
        background: #e9ecef;
        transform: translateY(-2px);
      }

      .tab-content {
        padding: 40px;
      }

      .form-floating {
        margin-bottom: 20px;
      }

      .form-control {
        border: 2px solid #e9ecef;
        border-radius: 12px;
        padding: 15px;
        transition: all 0.3s ease;
      }

      .form-control:focus {
        border-color: #f1567d;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
      }

      .btn-register {
        background: linear-gradient(135deg, #eb4646 0%, #de5296 100%);
        border: none;
        border-radius: 25px;
        padding: 15px 40px;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        width: 100%;
      }

      .btn-register:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
      }

      .social-login {
        text-align: center;
        margin: 30px 0;
      }

      .social-btn {
        border: 2px solid #e9ecef;
        border-radius: 12px;
        padding: 12px 20px;
        margin: 0 10px;
        transition: all 0.3s ease;
        text-decoration: none;
        color: #6c757d;
        display: inline-flex;
        align-items: center;
        gap: 10px;
      }

      .social-btn:hover {
        border-color: #c7f328;
        color: #ef51a5;
        transform: translateY(-2px);
      }

      .divider {
        text-align: center;
        margin: 30px 0;
        position: relative;
      }

      .divider::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 1px;
        background: #e9ecef;
      }

      .divider span {
        background: white;
        color: #6c757d;
      }

      .feature-icon {
        font-size: 1.5rem;
        color: #eff1f7;
        margin-bottom: 15px;
      }

      .login-link {
        text-align: center;
        margin-top: 30px;
        padding-top: 30px;
        border-top: 1px solid #e9ecef;
      }

      .login-link a {
        color: #d3ef44;
        text-decoration: none;
        font-weight: 600;
      }

      .login-link a:hover {
        text-decoration: underline;
      }

      /* Error messages */
      .errorlist {
        list-style: none;
        padding: 0;
        color: #dc3545;
        font-size: 0.875rem;
        margin-top: 0.25rem;
      }

      /*eye icon */
      .password-toggle {
        cursor: pointer;
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #6b7280;
      }
      .password-toggle:hover {
        color: #f1567d;
      }
      .password-toggle.fa-eye-slash {
        color: #f1567d;
      }
      .password-toggle.fa-eye {
        color: #6b7280;
      }
      .password-toggle:focus {
        outline: none;
      }
      .password-toggle:focus-visible {
        box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5);
      }
      .form-floating {
        position: relative;
      }
      .form-floating input {
        padding-right: 40px; /* Space for the icon */
      }
      .form-floating .password-toggle {
        right: 15px; /* Adjust as needed */
        top: 50%;
        transform: translateY(-50%);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="registration-container">
        <!-- Header -->
        <div class="header-section">
          <h1><i class="fas fa-rocket me-3"></i>JOIN KNOWLEDGE PORTAL</h1>
          <p>
            Join knowledge portal and find your dream job or recruit talented
            candidates
          </p>
        </div>

        <!-- Navigation Tabs -->
        <div class="px-4 pt-4">
          <ul
            class="nav nav-pills justify-content-center"
            id="registrationTabs"
            role="tablist"
          >
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="student-tab"
                data-bs-toggle="pill"
                data-bs-target="#student-pane"
                type="button"
                role="tab"
              >
                <i class="fas fa-user-graduate me-2"></i>Student
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="college-tab"
                data-bs-toggle="pill"
                data-bs-target="#college-pane"
                type="button"
                role="tab"
              >
                <i class="fas fa-university me-2"></i>College
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="recruiter-tab"
                data-bs-toggle="pill"
                data-bs-target="#recruiter-pane"
                type="button"
                role="tab"
              >
                <i class="fas fa-briefcase me-2"></i>Recruiter
              </button>
            </li>
          </ul>
        </div>

        <!-- Tab Content -->
        <div class="tab-content" id="registrationContent">
          <!-- Student Registration -->
          <div
            class="tab-pane fade show active"
            id="student-pane"
            role="tabpanel"
          >
            <form id="studentForm" method="post" action="{% url 'register' %}">
              {% csrf_token %}
              <input type="hidden" name="user_type" value="student" />

              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control {% if form.name.errors %}is-invalid{% endif %}"
                      id="studentFirstName"
                      name="name"
                      placeholder="Full Name"
                      required
                      value="{{ form.name.value|default:'' }}"
                    />
                    <label for="studentFirstName">Full Name</label>
                    {% if form.name.errors %}
                    <div class="invalid-feedback">{{ form.name.errors.0 }}</div>
                    {% endif %}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="email"
                      class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                      id="studentEmail"
                      name="email"
                      placeholder="Email"
                      required
                      value="{{ form.email.value|default:'' }}"
                    />
                    <label for="studentEmail">Email Address</label>
                    {% if form.email.errors %}
                    <div class="invalid-feedback">
                      {{ form.email.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="tel"
                      class="form-control"
                      id="studentPhone"
                      name="contact_number"
                      placeholder="Phone"
                      required
                    />
                    <label for="studentPhone">Contact Number</label>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="location"
                      name="location"
                      placeholder="Location"
                      required
                    />
                    <label for="location">Location</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="password"
                      class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
                      id="studentPassword"
                      name="password1"
                      placeholder="Password"
                      required
                    />
                    <label for="studentPassword">Password</label>
                    <i
                      class="fas fa-eye password-toggle"
                      onclick="togglePassword('studentPassword', this)"
                    ></i>
                    {% if form.password1.errors %}
                    <div class="invalid-feedback">
                      {{ form.password1.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="password"
                      class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
                      id="studentConfirmPassword"
                      name="password2"
                      placeholder="Confirm Password"
                      required
                    />
                    <label for="studentConfirmPassword">Confirm Password</label>
                    <i
                      class="fas fa-eye password-toggle"
                      onclick="togglePassword('studentConfirmPassword', this)"
                    ></i>
                    {% if form.password2.errors %}
                    <div class="invalid-feedback">
                      {{ form.password2.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="collegeName"
                      name="college_name"
                      placeholder="College Name"
                      required
                    />
                    <label for="collegeName">College/University</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="studentBranch"
                      name="branch"
                      placeholder="Branch/Department"
                      required
                    />
                    <label for="studentBranch">Branch/Department</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <select
                      class="form-select"
                      id="studentYear"
                      name="year_of_study"
                      placeholder="Year of Study"
                    >
                      <option value="" disabled selected>Select Year</option>
                      <option value="1">1st Year</option>
                      <option value="2">2nd Year</option>
                      <option value="3">3rd Year</option>
                      <option value="4">4th Year</option>
                      <option value="graduate">Graduate</option>
                    </select>
                    <label for="studentYear">Year of Study</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control"
                      id="studentSkills"
                      name="skills"
                      placeholder="Skills (comma separated)"
                      required
                    />
                    <label for="studentSkills">Skills</label>
                  </div>
                </div>
              </div>
              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="studentTerms"
                  required
                />
                <label class="form-check-label" for="studentTerms">
                  I agree to the
                  <a href="#" class="text-decoration-none"
                    >Terms & Conditions</a
                  >
                  and
                  <a href="#" class="text-decoration-none">Privacy Policy</a>
                </label>
              </div>

              <button type="submit" class="btn btn-primary btn-register">
                <i class="fas fa-user-plus me-2"></i>Create Student Account
              </button>
            </form>
          </div>

          <!-- College Registration -->
          <div class="tab-pane fade" id="college-pane" role="tabpanel">
            <form id="collegeForm" method="post" action="{% url 'register' %}">
              {% csrf_token %}
              <input type="hidden" name="user_type" value="college" />

              <div class="form-floating">
                <input
                  type="text"
                  class="form-control {% if form.name.errors %}is-invalid{% endif %}"
                  id="collegeName"
                  name="name"
                  placeholder="College Name"
                  required
                />
                <label for="collegeName">College/University Name</label>
                {% if form.name.errors %}
                <div class="invalid-feedback">{{ form.name.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="form-floating">
                <input
                  type="email"
                  class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                  id="collegeEmail"
                  name="email"
                  placeholder="Official Email"
                  required
                />
                <label for="collegeEmail">Official Email Address</label>
                {% if form.email.errors %}
                <div class="invalid-feedback">{{ form.email.errors.0 }}</div>
                {% endif %}
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="password"
                      class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
                      id="collegePassword"
                      name="password1"
                      placeholder="Password"
                      required
                    />
                    <label for="collegePassword">Password</label>
                    <i
                      class="fas fa-eye password-toggle"
                      onclick="togglePassword('collegePassword', this)"
                    ></i>
                    {% if form.password1.errors %}
                    <div class="invalid-feedback">
                      {{ form.password1.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="password"
                      class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
                      id="collegeConfirmPassword"
                      name="password2"
                      placeholder="Confirm Password"
                      required
                    />
                    <label for="collegeConfirmPassword">Confirm Password</label>
                    <i
                      class="fas fa-eye password-toggle"
                      onclick="togglePassword('collegeConfirmPassword', this)"
                    ></i>
                    {% if form.password2.errors %}
                    <div class="invalid-feedback">
                      {{ form.password2.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>

              <div class="form-floating">
                <input
                  type="tel"
                  class="form-control"
                  id="collegePhone"
                  name="contact_number"
                  placeholder="Phone"
                  required
                />
                <label for="collegePhone">Contact Number</label>
              </div>

              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="collegeTerms"
                  required
                />
                <label class="form-check-label" for="collegeTerms">
                  I agree to the
                  <a href="#" class="text-decoration-none"
                    >Terms & Conditions</a
                  >
                  and
                  <a href="#" class="text-decoration-none">Privacy Policy</a>
                </label>
              </div>

              <button type="submit" class="btn btn-primary btn-register">
                <i class="fas fa-university me-2"></i>Register College
              </button>
            </form>
          </div>

          <!-- Recruiter Registration -->
          <div class="tab-pane fade" id="recruiter-pane" role="tabpanel">
            <form
              id="recruiterForm"
              method="post"
              action="{% url 'register' %}"
            >
              {% csrf_token %}
              <input type="hidden" name="user_type" value="recruiter" />

              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="text"
                      class="form-control {% if form.name.errors %}is-invalid{% endif %}"
                      id="recruiterName"
                      name="name"
                      placeholder="Full Name"
                      required
                    />
                    <label for="recruiterName">Full Name</label>
                    {% if form.name.errors %}
                    <div class="invalid-feedback">{{ form.name.errors.0 }}</div>
                    {% endif %}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="email"
                      class="form-control {% if form.email.errors %}is-invalid{% endif %}"
                      id="recruiterEmail"
                      name="email"
                      placeholder="Work Email"
                      required
                    />
                    <label for="recruiterEmail">Work Email Address</label>
                    {% if form.email.errors %}
                    <div class="invalid-feedback">
                      {{ form.email.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>

              <div class="form-floating">
                <input
                  type="text"
                  class="form-control"
                  id="companyName"
                  name="company_name"
                  placeholder="Company Name"
                  required
                />
                <label for="companyName">Company Name</label>
              </div>

              <div class="form-floating">
                <input
                  type="text"
                  class="form-control"
                  id="recruiterDesignation"
                  name="designation"
                  placeholder="Job Title"
                  required
                />
                <label for="recruiterDesignation">Job Title/Designation</label>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="password"
                      class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
                      id="recruiterPassword"
                      name="password1"
                      placeholder="Password"
                      required
                    />
                    <label for="recruiterPassword">Password</label>
                    <i
                      class="fas fa-eye password-toggle"
                      onclick="togglePassword('recruiterPassword', this)"
                    ></i>
                    {% if form.password1.errors %}
                    <div class="invalid-feedback">
                      {{ form.password1.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <input
                      type="password"
                      class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
                      id="recruiterConfirmPassword"
                      name="password2"
                      placeholder="Confirm Password"
                      required
                    />
                    <label for="recruiterConfirmPassword"
                      >Confirm Password</label
                    >
                    <i
                      class="fas fa-eye password-toggle"
                      onclick="togglePassword('recruiterConfirmPassword', this)"
                    ></i>
                    {% if form.password2.errors %}
                    <div class="invalid-feedback">
                      {{ form.password2.errors.0 }}
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>

              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="recruiterTerms"
                  required
                />
                <label class="form-check-label" for="recruiterTerms">
                  I agree to the
                  <a href="#" class="text-decoration-none"
                    >Terms & Conditions</a
                  >
                  and
                  <a href="#" class="text-decoration-none">Privacy Policy</a>
                </label>
              </div>

              <button type="submit" class="btn btn-primary btn-register">
                <i class="fas fa-briefcase me-2"></i>Create Recruiter Account
              </button>
            </form>
          </div>
        </div>

        <!-- Social Login Section -->
        <div class="social-login px-4">
          <div class="divider">
            <span>Or continue with</span>
          </div>
          <a
            href="{% url 'social:begin' 'google-oauth2' %}?user_type=student"
            class="social-btn"
          >
            <i class="fab fa-google"></i>
            Google
          </a>
          <a href="#" class="social-btn">
            <i class="fab fa-linkedin"></i>
            LinkedIn
          </a>
        </div>

        <!-- Login Link -->
        <div class="login-link px-4 pb-4">
          <p class="mb-0">
            Already have an account?
            <a href="{% url 'login' %}">Sign in here</a>
          </p>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
      // Password toggle function
      function togglePassword(fieldId, icon) {
        const passwordField = document.getElementById(fieldId);
        if (passwordField.type === "password") {
          passwordField.type = "text";
          icon.classList.remove("fa-eye");
          icon.classList.add("fa-eye-slash");
        } else {
          passwordField.type = "password";
          icon.classList.remove("fa-eye-slash");
          icon.classList.add("fa-eye");
        }
      }
      // Form validation and submission
      document.addEventListener("DOMContentLoaded", function () {
        // Tab switching animation
        const tabButtons = document.querySelectorAll('[data-bs-toggle="pill"]');
        tabButtons.forEach((button) => {
          button.addEventListener("shown.bs.tab", function (e) {
            const targetPane = document.querySelector(
              e.target.getAttribute("data-bs-target")
            );
            targetPane.style.opacity = "0";
            targetPane.style.transform = "translateY(20px)";

            setTimeout(() => {
              targetPane.style.transition = "all 0.3s ease";
              targetPane.style.opacity = "1";
              targetPane.style.transform = "translateY(0)";
            }, 50);
          });
        });

        // Password confirmation check
        const forms = document.querySelectorAll("form");
        forms.forEach((form) => {
          form.addEventListener("submit", function (e) {
            const password = form.querySelector('input[name="password1"]');
            const confirmPassword = form.querySelector(
              'input[name="password2"]'
            );

            if (
              password &&
              confirmPassword &&
              password.value !== confirmPassword.value
            ) {
              e.preventDefault();
              alert("Passwords do not match!");
              return false;
            }

            // Ensure terms are checked
            const termsCheckbox = form.querySelector(
              'input[type="checkbox"][required]'
            );
            if (termsCheckbox && !termsCheckbox.checked) {
              e.preventDefault();
              alert("Please agree to the terms and conditions");
              return false;
            }

            return true;
          });
        });
      });
    </script>
  </body>
</html>
